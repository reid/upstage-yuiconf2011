YUI.add("upstage-permalink",function(b){function a(c){a.superclass.constructor.apply(this,arguments);}a.NS="permalink";a.NAME="upstage-permalink";a.ATTRS={strings:{value:{"slide":"Slide"}},titleContent:{value:b.one("title").get("text")}};b.extend(a,b.Plugin.Base,{initializer:function(d){var f=this;var g=new b.HistoryHash;var e=d.host;f.afterHostEvent("navigate",function(l){var n=f.get("titleContent");var i=l.details[0];var m=e.indexToId(i);var h;g.addValue("slide",m);if(i==1){h=n;}else{var k=e.get("slides").item(i-1);var j=k.one("h1,h2,h3,h4,h5,h6,p");if(!j){j=k;}if(j){h=j.get("text");}if(!h){h=f.get("strings").slide+" "+i;}h=n+": "+h;}b.one("title").setContent(h);});function c(h){if(h&&h.newVal){h=h.newVal;}else{h=h||1;}h=f._idToIndex(h);if(h&&h!==e.get("currentSlide")){e.set("currentSlide",h);}}g.on("slideChange",c);g.on("slideRemove",c);c(g.get("slide"));},_idToIndex:function(d){var c;if(!isNaN(d)){return d;}this.get("host").get("slides").some(function(f,e){if(f.get("id")===d){return c=e;}});if(c){return c+1;}else{return null;}}});b.Plugin.UpstagePermalink=a;},"@VERSION@",{requires:["upstage-slideshow","node","history"]});