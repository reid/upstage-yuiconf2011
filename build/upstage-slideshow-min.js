YUI.add("upstage-slideshow",function(e){e.Node.addMethod("parentsUntil",function c(h,g){return this.ancestors(function(i){return e.DOM.contains(g,i._node);});});var b="upstage",a="contentBox",f="currentSlide",d=f+"Change";e.namespace("Upstage");e.Upstage=e.Base.create(b,e.Widget,[],{initializer:function(){this.get("contentBox").addClass(this.get("classes").container);this._bindAttributes();this._publishEvents();this._detectFeatures();},_detectFeatures:function(){var g=this.get("boundingBox"),i=e.config.doc.documentElement.style,k="Webkit Moz O ms Khtml".split(" "),l=k.join("Transform,").split(","),h=k.join("TransitionProperty,").split(",");function j(m){return m in i;}if(e.Array.some(l,j)){g.addClass("csstransforms");}if(e.Array.some(h,j)){g.addClass("csstransitions");}},_publishEvents:function(){this.publish("warp",{emitFacade:true,defaultFn:function(g,h){if(h&&h.halt){h.halt();}this.set(f,this.get(f)+g.details[0]);}});this.publish("navigate",{emitFacade:true,defaultFn:function(h){var g=h.details[0];if(g!==this.get(f)){this.set(f,g);}}});},_bindAttributes:function(){this.after("containerClassesChange",function(h){var g=this.get("contentBox");e.Array.each(h.prevVal,g.removeClass,g);e.Array.each(h.newVal,g.addClass,g);});this.after(d,function(g){this.fire("navigate",g.newVal);});this.after(d,e.bind("_updateState",this));this.after(d,e.bind("_updateContainerClasses",this));},_updateContainerClasses:function(i){var h=i.newVal,k=this.get("classes").onPrefix,j=[k+h],g=this.indexToId(h);if(g!==h){j.push(k+g);}this.set("containerClasses",j);},snapToBounds:function(g){g=Math.min(g,this.get("slides").size());g=Math.max(1,g);return g;},syncUI:function(){var g=this.get(f);if(g===-1){this.set(f,1);}},indexToId:function(h){h=this.snapToBounds(h);var g=this.get("slides").item(h-1);var i=g.get("id");if(i.indexOf("yui_3")===0){i=null;}return(i)?i:h;},_updateState:function(k){var i=this.get("classes");var h=this.get("contentBox");var j=this.get("slides");var m=k.newVal-1;var l=h.one("."+i.current);var n=j.item(m);e.Array.each([i.before,i.previous,i.next,i.after,i.current],j.removeClass,j);n.addClass(i.current);if(l){l.parentsUntil(h).removeClass(i.childCurrent);}n.parentsUntil(h).addClass(i.childCurrent);var g=j.size();if(m>0){j.item(m-1).addClass(i.previous);}if(m+1<g){j.item(m+1).addClass(i.next);}if(m>1){j.slice(0,m-1).addClass(i.before);}if(m+2<g){j.slice(m+2).addClass(i.after);}this.fire("widget:contentUpdate");}},{ATTRS:{slides:{value:null},currentSlide:{value:-1,setter:function(h){h=parseInt(h);var g=e.Attribute.INVALID_VALUE,i=h;h=this.snapToBounds(h);if(isNaN(h)){}else{if(h!==i){}else{if(h===this.get(f)){}else{g=h;}}}return g;}},containerClasses:{value:[]},classes:{value:{container:"deck-container",after:"deck-after",before:"deck-before",current:"deck-current",childCurrent:"deck-child-current",next:"deck-next",onPrefix:"on-slide-",previous:"deck-previous"}}},HTML_PARSER:{slides:[".slide"]},CSS_PREFIX:b});},"@VERSION@",{requires:["oop","node","widget","base-build"]});