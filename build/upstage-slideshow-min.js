YUI.add("upstage-slideshow",function(c){c.Node.addMethod("parentsUntil",function b(d){return this.ancestors();});function a(){a.superclass.constructor.apply(this,arguments);}a.NAME=a.CSS_PREFIX="upstage";a.ATTRS={slides:{value:null},currentSlide:{value:-1,setter:function(e){e=parseInt(e);var d=c.Attribute.INVALID_VALUE,f=e;e=this.snapToBounds(e);if(isNaN(e)){}else{if(e!==f){}else{if(e===this.get("currentSlide")){}else{d=e;}}}return d;}},containerClasses:{value:[]},classes:{value:{container:"deck-container",after:"deck-after",before:"deck-before",current:"deck-current",childCurrent:"deck-child-current",next:"deck-next",onPrefix:"on-slide-",previous:"deck-previous"}}};a.HTML_PARSER={slides:[".slide"]};c.extend(a,c.Widget,{initializer:function(){this.get("contentBox").addClass(this.get("classes").container);this._bindAttributes();this._publishEvents();this._detectFeatures();},_detectFeatures:function(){var d=this.get("boundingBox"),f=c.config.doc.documentElement.style,h="Webkit Moz O ms Khtml".split(" "),i=h.join("Transform,").split(","),e=h.join("TransitionProperty,").split(",");function g(j){return j in f;}if(c.Array.some(i,g)){d.addClass("csstransforms");}if(c.Array.some(e,g)){d.addClass("csstransitions");}},_publishEvents:function(){this.publish("warp",{emitFacade:true,defaultFn:function(d,e){if(e&&e.halt){e.halt();}this.set("currentSlide",this.get("currentSlide")+d.details[0]);}});this.publish("navigate",{emitFacade:true,defaultFn:function(e){var d=e.details[0];if(d!==this.get("currentSlide")){this.set("currentSlide",d);}}});},_bindAttributes:function(){this.after("containerClassesChange",function(e){var d=this.get("contentBox");c.Array.each(e.prevVal,d.removeClass,d);c.Array.each(e.newVal,d.addClass,d);});this.after("currentSlideChange",function(d){this.fire("navigate",d.newVal);});this.after("currentSlideChange",c.bind("_updateState",this));this.after("currentSlideChange",c.bind("_updateContainerClasses",this));},_updateContainerClasses:function(f){var e=f.newVal,h=this.get("classes").onPrefix,g=[h+e],d=this.indexToId(e);if(d!==e){g.push(h+d);}this.set("containerClasses",g);},snapToBounds:function(d){d=Math.min(d,this.get("slides").size());d=Math.max(1,d);return d;},syncUI:function(){var d=this.get("currentSlide");if(d===-1){this.set("currentSlide",1);}},indexToId:function(e){e=this.snapToBounds(e);var d=this.get("slides").item(e-1);var f=d.get("id");if(f.indexOf("yui_3")===0){f=null;}return(f)?f:e;},_updateState:function(h){var f=this.get("classes");var e=this.get("contentBox");var g=this.get("slides");var j=h.newVal-1;var i=e.one("."+f.current);var k=g.item(j);c.Array.each([f.before,f.previous,f.next,f.after,f.current],g.removeClass,g);k.addClass(f.current);if(i){i.parentsUntil(e).removeClass(f.childCurrent);}k.parentsUntil(e).addClass(f.childCurrent);var d=g.size();if(j>0){g.item(j-1).addClass(f.previous);}if(j+1<d){g.item(j+1).addClass(f.next);}if(j>1){g.slice(0,j-1).addClass(f.before);}if(j+2<d){g.slice(j+2).addClass(f.after);}this.fire("widget:contentUpdate");}});c.augment(a,c.EventTarget);c.namespace("Upstage");c.Upstage=a;},"@VERSION@",{requires:["upstage-l10n","oop","node","event-custom"]});