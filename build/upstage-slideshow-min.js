YUI.add("upstage-slideshow",function(c){c.Node.addMethod("parentsUntil",function b(d){return this.ancestors();});function a(){a.superclass.constructor.apply(this,arguments);}a.NAME=a.CSS_PREFIX="upstage";a.ATTRS={slides:{value:null},currentSlide:{value:-1},classes:{value:{container:"deck-container",after:"deck-after",before:"deck-before",current:"deck-current",childCurrent:"deck-child-current",next:"deck-next",onPrefix:"on-slide-",previous:"deck-previous"}}};a.HTML_PARSER={slides:[".slide"]};c.extend(a,c.Widget,{initializer:function(){this.get("contentBox").addClass(this.get("classes").container);this._publishEvents();this._detectFeatures();},_detectFeatures:function(){var d=this.get("boundingBox"),f=c.config.doc.documentElement.style,h="Webkit Moz O ms Khtml".split(" "),i=h.join("Transform,").split(","),e=h.join("TransitionProperty,").split(",");function g(j){return j in f;}if(c.Array.some(i,g)){d.addClass("csstransforms");}if(c.Array.some(e,g)){d.addClass("csstransitions");}},_publishEvents:function(){this.publish("warp",{emitFacade:true,defaultFn:function(d,e){if(e&&e.halt){e.halt();}this.fire("navigate",this.get("currentSlide")+d.details[0]);}});this.publish("navigate",{emitFacade:true,defaultFn:function(e){var d=e.details[0];var f=false;d=this.snapToBounds(d);if(isNaN(d)){}else{if(d!=e.details[0]){}else{if(d===this.get("currentSlide")){}else{f=true;}}}if(f){this.set("currentSlide",d);this._updateState();}else{e.stopImmediatePropagation();}}});},snapToBounds:function(d){d=Math.min(d,this.get("slides").size());d=Math.max(1,d);return d;},syncUI:function(){var d=this.get("currentSlide");if(d===-1){this.fire("navigate",1);}},_updateState:function(){var f=this.get("classes");var e=this.get("contentBox");var g=this.get("slides");var i=this.get("currentSlide")-1;var h=e.one("."+f.current);var j=g.item(i);c.Array.each([f.before,f.previous,f.next,f.after,f.current],g.removeClass,g);j.addClass(f.current);if(h){h.parentsUntil(e).removeClass(f.childCurrent);}j.parentsUntil(e).addClass(f.childCurrent);var d=g.size();if(i>0){g.item(i-1).addClass(f.previous);}if(i+1<d){g.item(i+1).addClass(f.next);}if(i>1){g.slice(0,i-1).addClass(f.before);}if(i+2<d){g.slice(i+2).addClass(f.after);}this.fire("widget:contentUpdate");}});c.augment(a,c.EventTarget);c.namespace("Upstage");c.Upstage=a;},"@VERSION@",{requires:["upstage-l10n","oop","node","event-custom"]});